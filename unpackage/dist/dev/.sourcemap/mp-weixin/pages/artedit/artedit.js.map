{"version":3,"sources":["webpack:///E:/HBuilderX/project/read/main.js","webpack:///E:/HBuilderX/project/read/pages/artedit/artedit.vue?a6aa","webpack:///E:/HBuilderX/project/read/pages/artedit/artedit.vue?2d8f","webpack:///E:/HBuilderX/project/read/pages/artedit/artedit.vue?6457","webpack:///E:/HBuilderX/project/read/pages/artedit/artedit.vue?c39c","webpack:///E:/HBuilderX/project/read/pages/artedit/artedit.vue"],"names":["createPage","Page","art_id","_this","loginRes","sign","require","data","title","content","index","catid","picker","lists","category","imgList","uploadIndex","onLoad","options","apiServer","checkLogin","getArticleInfo","methods","uni","showLoading","request","url","artid","success","res","status","art_title","art_content","art_cate","i","photo","length","push","staticServer","method","categories","k","cateName","showToast","icon","complete","hideLoading","ChooseImage","chooseImage","count","sizeType","sourceType","concat","tempFilePaths","ViewImage","e","previewImage","urls","current","currentTarget","dataset","DelImg","showModal","cancelText","confirmText","confirm","splice","submitArticle","uploadImg","len","doSubmit","file","indexOf","appid","uploadFile","filePath","name","JSON","parse","setTimeout","fail","replace","header","uid","random","cate","getStorageSync","articleId","switchTab"],"mappings":";;;;;;;;;;kDAAA,wCAAmB;;AAEnB;AACA,kG;AACAA,UAAU,CAACC,gBAAD,CAAV,C;;;;;;;;;;;;;ACJA;AAAA;AAAA;AAAA;AAAA;AAAoH;AACpH;AAC2D;AACL;;;AAGtD;AACyJ;AACzJ,gBAAgB,mKAAU;AAC1B,EAAE,6EAAM;AACR,EAAE,kFAAM;AACR,EAAE,2FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,sFAAU;AACZ;AACA;;AAEA;AACA,IAAI,KAAU,EAAE,YAiBf;AACD;AACe,gF;;;;;;;;;;;;ACzCf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAkjB,CAAgB,+jBAAG,EAAC,C;;;;;;;;;;;;mICAtkB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAIC,MAAJ,CAAYC,KAAZ,CAAmBC,QAAnB,CAA6BC,IAAI,GAAGC,mBAAO,CAAC,+BAAD,CAA3C,C;AACe;AACdC,MADc,kBACP;AACN,WAAO;AACNC,WAAK,EAAE,EADD;AAENC,aAAO,EAAE,EAFH;AAGNC,WAAK,EAAE,CAAC,CAHF;AAINC,WAAK,EAAE,CAJD;AAKNC,YAAM,EAAE,EALF;AAMNC,WAAK,EAAE,EAND;AAONC,cAAQ,EAAE,EAPJ;AAQNC,aAAO,EAAE,EARH;AASNC,iBAAW,EAAE,CATP,EAAP;;AAWA,GAba;AAcdC,QAdc,kBAcPC,OAdO,EAcE;AACfhB,UAAM,GAAGgB,OAAO,CAAChB,MAAjB;AACAC,SAAK,GAAG,IAAR;AACAE,QAAI,CAACA,IAAL,CAAUF,KAAK,CAACgB,SAAhB;AACAf,YAAQ,GAAG,KAAKgB,UAAL,CAAgB,UAAhB,EAA4B,GAA5B,CAAX;AACA,QAAI,CAAChB,QAAL,EAAe;AACd,aAAO,KAAP;AACA;AACDD,SAAK,CAACkB,cAAN;AACA,GAvBa;AAwBdC,SAAO,EAAE;AACRD,kBADQ,4BACS;AAChBE,SAAG,CAACC,WAAJ,CAAgB;AACfhB,aAAK,EAAE,SADQ,EAAhB;;AAGAe,SAAG,CAACE,OAAJ,CAAY;AACXC,WAAG,EAAEvB,KAAK,CAACgB,SAAN,GAAkB,YADZ;AAEXZ,YAAI,EAAE;AACLoB,eAAK,EAAEzB,MADF,EAFK;;AAKX0B,eALW,mBAKHC,GALG,EAKE;AACZ,cAAIA,GAAG,CAACtB,IAAJ,CAASuB,MAAT,IAAmB,IAAvB,EAA6B;AAC5B,gBAAIvB,IAAI,GAAGsB,GAAG,CAACtB,IAAJ,CAASA,IAApB;AACAJ,iBAAK,CAACK,KAAN,GAAcD,IAAI,CAACwB,SAAnB;AACA5B,iBAAK,CAACM,OAAN,GAAgBF,IAAI,CAACyB,WAArB;AACA7B,iBAAK,CAACQ,KAAN,GAAcJ,IAAI,CAAC0B,QAAnB;AACA,iBAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG3B,IAAI,CAAC4B,KAAL,CAAWC,MAA/B,EAAuCF,CAAC,EAAxC,EAA4C;AAC3C/B,mBAAK,CAACY,OAAN,CAAcsB,IAAd,CAAmBlC,KAAK,CAACmC,YAAN,GAAqB/B,IAAI,CAAC4B,KAAL,CAAWD,CAAX,EAAczB,OAAtD;AACA;AACD;AACAc,eAAG,CAACE,OAAJ,CAAY;AACXC,iBAAG,EAAEvB,KAAK,CAACgB,SAAN,GAAkB,kBADZ;AAEXoB,oBAAM,EAAE,KAFG;AAGXX,qBAAO,EAAE,iBAAAC,GAAG,EAAI;AACf,oBAAIW,UAAU,GAAGX,GAAG,CAACtB,IAAJ,CAASA,IAA1B;AACA,qBAAK,IAAIkC,CAAT,IAAcD,UAAd,EAA0B;AACzBrC,uBAAK,CAACS,MAAN,CAAayB,IAAb,CAAkBG,UAAU,CAACC,CAAD,CAA5B;AACA;AACD;AACAtC,qBAAK,CAACW,QAAN,GAAiB0B,UAAjB;AACA;AACA,oBAAIE,QAAQ,GAAGF,UAAU,CAACrC,KAAK,CAACQ,KAAP,CAAzB;AACA,qBAAK,IAAIuB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG/B,KAAK,CAACS,MAAN,CAAawB,MAAjC,EAAyCF,CAAC,EAA1C,EAA8C;AAC7C,sBAAIQ,QAAQ,IAAIvC,KAAK,CAACS,MAAN,CAAasB,CAAb,CAAhB,EAAiC;AAChC/B,yBAAK,CAACO,KAAN,GAAcwB,CAAd;AACA;AACA;AACD;AACD,eAlBU,EAAZ;;AAoBA,WA7BD,MA6BO;AACNX,eAAG,CAACoB,SAAJ,CAAc;AACbnC,mBAAK,EAAEqB,GAAG,CAACtB,IAAJ,CAASA,IADH;AAEbqC,kBAAI,EAAE,MAFO,EAAd;;AAIA;AACD,SAzCU;AA0CXC,gBA1CW,sBA0CA;AACVtB,aAAG,CAACuB,WAAJ;AACA,SA5CU,EAAZ;;AA8CA,KAnDO;AAoDRC,eApDQ,yBAoDM;AACbxB,SAAG,CAACyB,WAAJ,CAAgB;AACfC,aAAK,EAAE,CADQ,EACL;AACVC,gBAAQ,EAAE,CAAC,UAAD,EAAa,YAAb,CAFK,EAEuB;AACtCC,kBAAU,EAAE,CAAC,OAAD,CAHG,EAGQ;AACvBvB,eAAO,EAAE,iBAACC,GAAD,EAAS;AACjB,cAAI1B,KAAK,CAACY,OAAN,CAAcqB,MAAd,IAAwB,CAA5B,EAA+B;AAC9BjC,iBAAK,CAACY,OAAN,GAAgBZ,KAAK,CAACY,OAAN,CAAcqC,MAAd,CAAqBvB,GAAG,CAACwB,aAAzB,CAAhB;AACA,WAFD,MAEO;AACNlD,iBAAK,CAACY,OAAN,GAAgBc,GAAG,CAACwB,aAApB;AACA;AACD,SAVc,EAAhB;;AAYA,KAjEO;AAkERC,aAlEQ,qBAkEEC,CAlEF,EAkEK;AACZhC,SAAG,CAACiC,YAAJ,CAAiB;AAChBC,YAAI,EAAEtD,KAAK,CAACY,OADI;AAEhB2C,eAAO,EAAEH,CAAC,CAACI,aAAF,CAAgBC,OAAhB,CAAwBlC,GAFjB,EAAjB;;AAIA,KAvEO;AAwERmC,UAxEQ,kBAwEDN,CAxEC,EAwEE;AACThC,SAAG,CAACuC,SAAJ,CAAc;AACbtD,aAAK,EAAE,IADM;AAEbC,eAAO,EAAE,WAFI;AAGbsD,kBAAU,EAAE,IAHC;AAIbC,mBAAW,EAAE,IAJA;AAKbpC,eAAO,EAAE,iBAAAC,GAAG,EAAI;AACf,cAAIA,GAAG,CAACoC,OAAR,EAAiB;AAChB9D,iBAAK,CAACY,OAAN,CAAcmD,MAAd,CAAqBX,CAAC,CAACI,aAAF,CAAgBC,OAAhB,CAAwBlD,KAA7C,EAAoD,CAApD;AACA;AACD,SATY,EAAd;;AAWA,KApFO;AAqFRyD,iBArFQ,2BAqFQ;AACf,UAAIhE,KAAK,CAACO,KAAN,IAAe,CAAC,CAApB,EAAuB;AACtBa,WAAG,CAACoB,SAAJ,CAAc;AACbnC,eAAK,EAAE,SADM;AAEboC,cAAI,EAAE,MAFO,EAAd;;AAIA,eAAO,KAAP;AACA;AACD,UAAIzC,KAAK,CAACK,KAAN,CAAY4B,MAAZ,IAAsB,CAA1B,EAA6B;AAC5Bb,WAAG,CAACoB,SAAJ,CAAc;AACbnC,eAAK,EAAE,SADM;AAEboC,cAAI,EAAE,MAFO,EAAd;;AAIA,eAAO,KAAP;AACA;AACD,UAAIzC,KAAK,CAACM,OAAN,CAAc2B,MAAd,IAAwB,CAA5B,EAA+B;AAC9Bb,WAAG,CAACoB,SAAJ,CAAc;AACbnC,eAAK,EAAE,SADM;AAEboC,cAAI,EAAE,MAFO,EAAd;;AAIA,eAAO,KAAP;AACA;AACD,UAAIzC,KAAK,CAACY,OAAN,CAAcqB,MAAd,IAAwB,CAA5B,EAA+B;AAC9Bb,WAAG,CAACoB,SAAJ,CAAc;AACbnC,eAAK,EAAE,OADM;AAEboC,cAAI,EAAE,MAFO,EAAd;;AAIA,eAAO,KAAP;AACA;AACDrB,SAAG,CAACC,WAAJ,CAAgB;AACfhB,aAAK,EAAE,SADQ,EAAhB;;AAGAL,WAAK,CAACiE,SAAN;AACA,KAtHO;AAuHRA,aAvHQ,uBAuHI;AACX,UAAIC,GAAG,GAAGlE,KAAK,CAACY,OAAN,CAAcqB,MAAxB;AACA,UAAIjC,KAAK,CAACa,WAAN,IAAqBqD,GAAzB,EAA8B;AAC7BlE,aAAK,CAACmE,QAAN;AACA,OAFD,MAEO;AACN,YAAIC,IAAI,GAAGpE,KAAK,CAACY,OAAN,CAAcZ,KAAK,CAACa,WAApB,CAAX;AACA,YAAIuD,IAAI,CAACC,OAAL,CAAarE,KAAK,CAACsE,KAAnB,IAA4B,CAAhC,EAAmC;AAClClD,aAAG,CAACmD,UAAJ,CAAe;AACdhD,eAAG,EAAEvB,KAAK,CAACgB,SAAN,GAAkB,WADT;AAEdwD,oBAAQ,EAAEJ,IAFI;AAGdK,gBAAI,EAAE,MAHQ;AAIdhD,mBAJc,mBAINC,GAJM,EAID;AACZA,iBAAG,GAAGgD,IAAI,CAACC,KAAL,CAAWjD,GAAG,CAACtB,IAAf,CAAN;AACA,kBAAIsB,GAAG,CAACC,MAAJ,IAAc,IAAlB,EAAwB;AACvBP,mBAAG,CAACoB,SAAJ,CAAc;AACbnC,uBAAK,EAAE,aADM;AAEboC,sBAAI,EAAE,MAFO,EAAd;;AAIA,uBAAO,KAAP;AACA;AACDzC,mBAAK,CAACa,WAAN;AACAb,mBAAK,CAACU,KAAN,CAAYwB,IAAZ,CAAiBR,GAAG,CAACtB,IAArB;AACAwE,wBAAU,CAAC,YAAW;AACrB5E,qBAAK,CAACiE,SAAN;AACA,eAFS,EAEP,IAFO,CAAV;AAGA,aAlBa;AAmBdY,gBAnBc,kBAmBP;AACNzD,iBAAG,CAACoB,SAAJ,CAAc;AACbnC,qBAAK,EAAE,aADM;AAEboC,oBAAI,EAAE,MAFO,EAAd;;AAIA,aAxBa,EAAf;;AA0BA,SA3BD,MA2BO;AACNzC,eAAK,CAACa,WAAN;AACAb,eAAK,CAACU,KAAN,CAAYwB,IAAZ,CAAiBkC,IAAI,CAACU,OAAL,CAAa9E,KAAK,CAACmC,YAAnB,EAAiC,EAAjC,CAAjB;AACAnC,eAAK,CAACiE,SAAN;AACA;AACD;AACD,KA9JO;AA+JRE,YA/JQ,sBA+JG;AACV/C,SAAG,CAACC,WAAJ,CAAgB;AACfhB,aAAK,EAAE,SADQ,EAAhB;;AAGAe,SAAG,CAACE,OAAJ,CAAY;AACXC,WAAG,EAAEvB,KAAK,CAACgB,SAAN,GAAkB,mBAAlB,GAAsCjB,MADhC;AAEXqC,cAAM,EAAE,MAFG;AAGX2C,cAAM,EAAE;AACP,0BAAgB,mCADT,EAHG;;AAMX3E,YAAI,EAAE;AACLC,eAAK,EAAEL,KAAK,CAACK,KADR;AAELC,iBAAO,EAAEN,KAAK,CAACM,OAFV;AAGLI,eAAK,EAAEV,KAAK,CAACU,KAHR;AAILsE,aAAG,EAAE/E,QAAQ,CAAC,CAAD,CAJR;AAKLgF,gBAAM,EAAEhF,QAAQ,CAAC,CAAD,CALX;AAMLiF,cAAI,EAAElF,KAAK,CAACQ,KANP;AAOLN,cAAI,EAAEkB,GAAG,CAAC+D,cAAJ,CAAmB,MAAnB,CAPD;AAQLC,mBAAS,EAAErF,MARN,EANK;;AAgBX0B,eAAO,EAAE,iBAASC,GAAT,EAAc;AACtB,cAAIA,GAAG,CAACtB,IAAJ,CAASuB,MAAT,IAAmB,IAAvB,EAA6B;AAC5BP,eAAG,CAACoB,SAAJ,CAAc;AACbnC,mBAAK,EAAE,MADM;AAEboC,kBAAI,EAAE,SAFO,EAAd;;AAIAzC,iBAAK,CAACY,OAAN,GAAgBZ,KAAK,CAACU,KAAN,GAAc,EAA9B;AACA;AACAR,gBAAI,CAACA,IAAL,CAAUF,KAAK,CAACgB,SAAhB;AACA;AACAhB,iBAAK,CAACO,KAAN,GAAc,CAAC,CAAf;AACAP,iBAAK,CAACM,OAAN,GAAgB,EAAhB;AACAN,iBAAK,CAACK,KAAN,GAAc,EAAd;AACAuE,sBAAU,CAAC,YAAW;AACrBxD,iBAAG,CAACiE,SAAJ,CAAc;AACb9D,mBAAG,EAAE,UADQ,EAAd;;AAGA,aAJS,EAIP,IAJO,CAAV;AAKA,WAjBD,MAiBO;AACNH,eAAG,CAACoB,SAAJ,CAAc;AACbnC,mBAAK,EAAEqB,GAAG,CAACtB,IAAJ,CAASA,IADH;AAEbqC,kBAAI,EAAE,MAFO,EAAd;;AAIA;AACD,SAxCU;AAyCXC,gBAzCW,sBAyCA;AACVtB,aAAG,CAACuB,WAAJ;AACA,SA3CU,EAAZ;;AA6CA,KAhNO,EAxBK,E","file":"pages/artedit/artedit.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'\nimport Page from './pages/artedit/artedit.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./artedit.vue?vue&type=template&id=2276fa0b&\"\nvar renderjs\nimport script from \"./artedit.vue?vue&type=script&lang=js&\"\nexport * from \"./artedit.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('2276fa0b')) {\n      api.createRecord('2276fa0b', component.options)\n    } else {\n      api.reload('2276fa0b', component.options)\n    }\n    module.hot.accept(\"./artedit.vue?vue&type=template&id=2276fa0b&\", function () {\n      api.rerender('2276fa0b', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"project/read/pages/artedit/artedit.vue\"\nexport default component.exports","export * from \"-!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./artedit.vue?vue&type=template&id=2276fa0b&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./artedit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./artedit.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nlet art_id, _this, loginRes, sign = require('../../commons/sign.js');\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\ttitle: '',\n\t\t\tcontent: '',\n\t\t\tindex: -1,\n\t\t\tcatid: 0,\n\t\t\tpicker: [],\n\t\t\tlists: [],\n\t\t\tcategory: [],\n\t\t\timgList: [],\n\t\t\tuploadIndex: 0\n\t\t}\n\t},\n\tonLoad(options) {\n\t\tart_id = options.art_id;\n\t\t_this = this;\n\t\tsign.sign(_this.apiServer);\n\t\tloginRes = this.checkLogin('../my/my', '2');\n\t\tif (!loginRes) {\n\t\t\treturn false;\n\t\t}\n\t\t_this.getArticleInfo();\n\t},\n\tmethods: {\n\t\tgetArticleInfo() {\n\t\t\tuni.showLoading({\n\t\t\t\ttitle: \"正在加载...\"\n\t\t\t})\n\t\t\tuni.request({\n\t\t\t\turl: _this.apiServer + \"art&m=info\",\n\t\t\t\tdata: {\n\t\t\t\t\tartid: art_id\n\t\t\t\t},\n\t\t\t\tsuccess(res) {\n\t\t\t\t\tif (res.data.status == 'ok') {\n\t\t\t\t\t\tlet data = res.data.data;\n\t\t\t\t\t\t_this.title = data.art_title;\n\t\t\t\t\t\t_this.content = data.art_content;\n\t\t\t\t\t\t_this.catid = data.art_cate;\n\t\t\t\t\t\tfor (let i = 0; i < data.photo.length; i++) {\n\t\t\t\t\t\t\t_this.imgList.push(_this.staticServer + data.photo[i].content);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//获取分类\n\t\t\t\t\t\tuni.request({\n\t\t\t\t\t\t\turl: _this.apiServer + 'category&m=index',\n\t\t\t\t\t\t\tmethod: 'GET',\n\t\t\t\t\t\t\tsuccess: res => {\n\t\t\t\t\t\t\t\tvar categories = res.data.data;\n\t\t\t\t\t\t\t\tfor (var k in categories) {\n\t\t\t\t\t\t\t\t\t_this.picker.push(categories[k]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t// 记录分类信息\n\t\t\t\t\t\t\t\t_this.category = categories;\n\t\t\t\t\t\t\t\t// 对应的查找picker的默认值\n\t\t\t\t\t\t\t\tvar cateName = categories[_this.catid];\n\t\t\t\t\t\t\t\tfor (var i = 0; i < _this.picker.length; i++) {\n\t\t\t\t\t\t\t\t\tif (cateName == _this.picker[i]) {\n\t\t\t\t\t\t\t\t\t\t_this.index = i;\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: res.data.data,\n\t\t\t\t\t\t\ticon: \"none\"\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tcomplete() {\n\t\t\t\t\tuni.hideLoading();\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tChooseImage() {\n\t\t\tuni.chooseImage({\n\t\t\t\tcount: 4, //默认9\n\t\t\t\tsizeType: ['original', 'compressed'], //可以指定是原图还是压缩图，默认二者都有\n\t\t\t\tsourceType: ['album'], //从相册选择\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tif (_this.imgList.length != 0) {\n\t\t\t\t\t\t_this.imgList = _this.imgList.concat(res.tempFilePaths)\n\t\t\t\t\t} else {\n\t\t\t\t\t\t_this.imgList = res.tempFilePaths\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tViewImage(e) {\n\t\t\tuni.previewImage({\n\t\t\t\turls: _this.imgList,\n\t\t\t\tcurrent: e.currentTarget.dataset.url\n\t\t\t});\n\t\t},\n\t\tDelImg(e) {\n\t\t\tuni.showModal({\n\t\t\t\ttitle: '提示',\n\t\t\t\tcontent: '确定要删除图片吗？',\n\t\t\t\tcancelText: '取消',\n\t\t\t\tconfirmText: '确定',\n\t\t\t\tsuccess: res => {\n\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t_this.imgList.splice(e.currentTarget.dataset.index, 1)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tsubmitArticle() {\n\t\t\tif (_this.index == -1) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: \"请选择文章分类\",\n\t\t\t\t\ticon: \"none\"\n\t\t\t\t});\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (_this.title.length == 0) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: \"请输入文章标题\",\n\t\t\t\t\ticon: \"none\"\n\t\t\t\t});\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (_this.content.length == 0) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: \"请输入文章内容\",\n\t\t\t\t\ticon: \"none\"\n\t\t\t\t});\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (_this.imgList.length == 0) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: \"请上传图片\",\n\t\t\t\t\ticon: \"none\"\n\t\t\t\t});\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tuni.showLoading({\n\t\t\t\ttitle: \"正在上传...\"\n\t\t\t});\n\t\t\t_this.uploadImg();\n\t\t},\n\t\tuploadImg() {\n\t\t\tlet len = _this.imgList.length;\n\t\t\tif (_this.uploadIndex >= len) {\n\t\t\t\t_this.doSubmit();\n\t\t\t} else {\n\t\t\t\tlet file = _this.imgList[_this.uploadIndex];\n\t\t\t\tif (file.indexOf(_this.appid) > 0) {\n\t\t\t\t\tuni.uploadFile({\n\t\t\t\t\t\turl: _this.apiServer + 'uploadimg',\n\t\t\t\t\t\tfilePath: file,\n\t\t\t\t\t\tname: 'file',\n\t\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\t\tres = JSON.parse(res.data);\n\t\t\t\t\t\t\tif (res.status != 'ok') {\n\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\ttitle: \"上传图片失败,请重试!\",\n\t\t\t\t\t\t\t\t\ticon: \"none\"\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t_this.uploadIndex++;\n\t\t\t\t\t\t\t_this.lists.push(res.data);\n\t\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\t\t_this.uploadImg();\n\t\t\t\t\t\t\t}, 1000)\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfail() {\n\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\ttitle: \"上传图片失败,请重试!\",\n\t\t\t\t\t\t\t\ticon: \"none\"\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t} else {\n\t\t\t\t\t_this.uploadIndex++;\n\t\t\t\t\t_this.lists.push(file.replace(_this.staticServer, ''));\n\t\t\t\t\t_this.uploadImg();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tdoSubmit() {\n\t\t\tuni.showLoading({\n\t\t\t\ttitle: \"正在提交...\"\n\t\t\t});\n\t\t\tuni.request({\n\t\t\t\turl: _this.apiServer + \"art&m=edit&artid=\"+art_id,\n\t\t\t\tmethod: \"POST\",\n\t\t\t\theader: {\n\t\t\t\t\t'content-type': 'application/x-www-form-urlencoded'\n\t\t\t\t},\n\t\t\t\tdata: {\n\t\t\t\t\ttitle: _this.title,\n\t\t\t\t\tcontent: _this.content,\n\t\t\t\t\tlists: _this.lists,\n\t\t\t\t\tuid: loginRes[0],\n\t\t\t\t\trandom: loginRes[2],\n\t\t\t\t\tcate: _this.catid,\n\t\t\t\t\tsign: uni.getStorageSync(\"sign\"),\n\t\t\t\t\tarticleId: art_id\n\t\t\t\t},\n\t\t\t\tsuccess: function(res) {\n\t\t\t\t\tif (res.data.status == 'ok') {\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: \"提交成功\",\n\t\t\t\t\t\t\ticon: \"success\"\n\t\t\t\t\t\t});\n\t\t\t\t\t\t_this.imgList = _this.lists = [];\n\t\t\t\t\t\t// 清空数据\n\t\t\t\t\t\tsign.sign(_this.apiServer);\n\t\t\t\t\t\t// 防止数据缓存\n\t\t\t\t\t\t_this.index = -1;\n\t\t\t\t\t\t_this.content = '';\n\t\t\t\t\t\t_this.title = '';\n\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\tuni.switchTab({\n\t\t\t\t\t\t\t\turl: '../me/me'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}, 1000);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: res.data.data,\n\t\t\t\t\t\t\ticon: \"none\"\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tcomplete() {\n\t\t\t\t\tuni.hideLoading();\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t}\n}\n"],"sourceRoot":""}