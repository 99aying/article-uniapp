{"version":3,"sources":["webpack:///E:/HBuilderX/project/read/main.js","webpack:///E:/HBuilderX/project/read/pages/login/login.vue?a213","webpack:///E:/HBuilderX/project/read/pages/login/login.vue?b46b","webpack:///E:/HBuilderX/project/read/pages/login/login.vue?f09a","webpack:///E:/HBuilderX/project/read/pages/login/login.vue?04fb","webpack:///E:/HBuilderX/project/read/pages/login/login.vue"],"names":["createPage","Page","_this","pageOptions","data","onLoad","options","console","log","uni","login","success","res","getUserInfo","info","fail","showToast","title","methods","userInfo","detail","provider","request","method","url","apiServer","code","session_key","openid","header","name","nickName","face","avatarUrl","setStorageSync","u_id","u_name","u_random","u_face","backtype","redirectTo","backpage","switchTab","appLogin","getProvider","service","indexOf","loginRes","JSON","stringify","infoRes"],"mappings":"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","file":"pages/login/login.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'\nimport Page from './pages/login/login.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./login.vue?vue&type=template&id=0e81f4fa&\"\nvar renderjs\nimport script from \"./login.vue?vue&type=script&lang=js&\"\nexport * from \"./login.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('0e81f4fa')) {\n      api.createRecord('0e81f4fa', component.options)\n    } else {\n      api.reload('0e81f4fa', component.options)\n    }\n    module.hot.accept(\"./login.vue?vue&type=template&id=0e81f4fa&\", function () {\n      api.rerender('0e81f4fa', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"project/read/pages/login/login.vue\"\nexport default component.exports","export * from \"-!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=template&id=0e81f4fa&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nlet _this, pageOptions;\nexport default {\n\tdata() {\n\t\treturn {\n\n\t\t}\n\t},\n\tonLoad(options) {\n\t\t_this = this;\n\t\tpageOptions = options;\n\t\tconsole.log(options);\n\t\t\n\n\t\tuni.login({\n\t\t\tsuccess(res) {\n\t\t\t\tuni.getUserInfo({\n\t\t\t\t\tsuccess(info) {\n\n\t\t\t\t\t},\n\t\t\t\t\tfail() {\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: \"微信授权登录失败\"\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\tfail() {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: \"微信授权登录失败\"\n\t\t\t\t})\n\t\t\t}\n\t\t})\n\n\t},\n\tmethods: {\n\t\tgetUserInfo(res) {\n\t\t\tconsole.log(res);\n\t\t\tlet userInfo = res.detail.userInfo;\n\t\t\tuni.login({\n\t\t\t\tprovider:\"weixin\",\n\t\t\t\tsuccess(res) {\n\t\t\t\t\tuni.request({\n\t\t\t\t\t\tmethod: \"GET\",\n\t\t\t\t\t\turl: _this.apiServer + \"member&m=codeToSession&code=\" + res.code,\n\t\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\t\tlet session_key = res.data.session_key;\n\t\t\t\t\t\t\tlet openid = res.data.openid;\n\t\t\t\t\t\t\tuni.request({\n\t\t\t\t\t\t\t\tmethod: \"POST\",\n\t\t\t\t\t\t\t\theader: {\n\t\t\t\t\t\t\t\t\t'content-type': \"application/x-www-form-urlencoded\"\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\turl: _this.apiServer+\"member&m=login\",\n\t\t\t\t\t\t\t\tdata:{\n\t\t\t\t\t\t\t\t\topenid: openid,\n\t\t\t\t\t\t\t\t\tname: userInfo.nickName,\n\t\t\t\t\t\t\t\t\tface: userInfo.avatarUrl\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\t\t\t\tres = res.data;\n\t\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\t\ttitle: \"登录成功\"\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tuni.setStorageSync(\"uid\", res.data.u_id);\n\t\t\t\t\t\t\t\t\tuni.setStorageSync(\"uname\", res.data.u_name);\n\t\t\t\t\t\t\t\t\tuni.setStorageSync(\"urandom\", res.data.u_random);\n\t\t\t\t\t\t\t\t\tuni.setStorageSync(\"uface\", res.data.u_face);\n\t\t\t\t\t\t\t\t\tif(pageOptions.backtype == 1) {\n\t\t\t\t\t\t\t\t\t\tuni.redirectTo({\n\t\t\t\t\t\t\t\t\t\t\turl: pageOptions.backpage\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\t\tuni.switchTab({\n\t\t\t\t\t\t\t\t\t\t\turl: pageOptions.backpage\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tappLogin: function() {\n\t\t\tuni.getProvider({\n\t\t\t\tservice: 'oauth',\n\t\t\t\tsuccess: function(res) {\n\t\t\t\t\tconsole.log(res.provider);\n\t\t\t\t\t//支持微信、qq和微博等\n\t\t\t\t\tif (~res.provider.indexOf('weixin')) {\n\t\t\t\t\t\tuni.login({\n\t\t\t\t\t\t\tprovider: 'weixin',\n\t\t\t\t\t\t\tsuccess: function(loginRes) {\n\t\t\t\t\t\t\t\tconsole.log('-------获取openid(unionid)-----');\n\t\t\t\t\t\t\t\tconsole.log(JSON.stringify(loginRes));\n\t\t\t\t\t\t\t\t// 获取用户信息\n\t\t\t\t\t\t\t\tuni.getUserInfo({\n\t\t\t\t\t\t\t\t\tprovider: 'weixin',\n\t\t\t\t\t\t\t\t\tsuccess: function(infoRes) {\n\t\t\t\t\t\t\t\t\t\tconsole.log('-------获取微信用户所有-----');\n\t\t\t\t\t\t\t\t\t\tconsole.log(JSON.stringify(infoRes.userInfo));\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t}\n}\n"],"sourceRoot":""}