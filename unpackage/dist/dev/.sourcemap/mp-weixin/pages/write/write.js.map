{"version":3,"sources":["webpack:///E:/HBuilderX/project/read/main.js","webpack:///E:/HBuilderX/project/read/pages/write/write.vue?052c","webpack:///E:/HBuilderX/project/read/pages/write/write.vue?2b66","webpack:///E:/HBuilderX/project/read/pages/write/write.vue?6d02","webpack:///E:/HBuilderX/project/read/pages/write/write.vue?a44b","webpack:///E:/HBuilderX/project/read/pages/write/write.vue"],"names":["createPage","Page","_this","loginRes","sign","require","data","title","content","index","catid","picker","lists","category","imgList","uploadIndex","onLoad","checkLogin","apiServer","getArticleCategory","onShow","methods","uni","request","url","method","success","res","status","k","push","PickerChange","e","detail","value","catname","ChooseImage","chooseImage","count","sizeType","sourceType","length","concat","tempFilePaths","ViewImage","previewImage","urls","current","currentTarget","dataset","DelImg","showModal","cancelText","confirmText","confirm","splice","submitArticle","showToast","icon","showLoading","uploadImg","len","doSubmit","uploadFile","filePath","name","JSON","parse","setTimeout","fail","console","log","header","uid","random","cate","getStorageSync","switchTab","complete","hideLoading"],"mappings":";;;;;;;;;;kDAAA,wCAAmB;;AAEnB;AACA,4F;AACAA,UAAU,CAACC,cAAD,CAAV,C;;;;;;;;;;;;;ACJA;AAAA;AAAA;AAAA;AAAA;AAAkH;AAClH;AACyD;AACL;;;AAGpD;AACyJ;AACzJ,gBAAgB,mKAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,gFAAM;AACR,EAAE,yFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,oFAAU;AACZ;AACA;;AAEA;AACA,IAAI,KAAU,EAAE,YAiBf;AACD;AACe,gF;;;;;;;;;;;;ACzCf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAgjB,CAAgB,6jBAAG,EAAC,C;;;;;;;;;;;;mICApkB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAIC,KAAJ,CAAWC,QAAX,CAAqBC,IAAI,GAAGC,mBAAO,CAAC,+BAAD,CAAnC,C;AACe;AACdC,MADc,kBACP;AACN,WAAO;AACNC,WAAK,EAAE,EADD;AAENC,aAAO,EAAE,EAFH;AAGNC,WAAK,EAAE,CAAC,CAHF;AAINC,WAAK,EAAE,CAJD;AAKNC,YAAM,EAAE,EALF;AAMNC,WAAK,EAAE,EAND;AAONC,cAAQ,EAAE,EAPJ;AAQNC,aAAO,EAAE,EARH;AASNC,iBAAW,EAAE,CATP,EAAP;;AAWA,GAba;AAcdC,QAAM,EAAE,kBAAW;AAClBd,SAAK,GAAG,IAAR;AACAC,YAAQ,GAAGD,KAAK,CAACe,UAAN,CAAiB,gBAAjB,EAAmC,CAAnC,CAAX;AACA,QAAI,CAACd,QAAL,EAAe;AACd,aAAO,KAAP;AACA;AACD;AACAC,QAAI,CAACA,IAAL,CAAUF,KAAK,CAACgB,SAAhB;AACA;AACAhB,SAAK,CAACiB,kBAAN;AACA,GAxBa;AAyBdC,QAAM,EAAE,kBAAW;;AAElB,GA3Ba;AA4BdC,SAAO,EAAE;AACR;AACAF,sBAFQ,gCAEa;AACpBG,SAAG,CAACC,OAAJ,CAAY;AACXC,WAAG,EAAE,KAAKN,SAAL,GAAiB,kBADX;AAEXO,cAAM,EAAE,KAFG;AAGXC,eAHW,mBAGHC,GAHG,EAGE;AACZ,cAAIA,GAAG,CAACrB,IAAJ,CAASsB,MAAT,IAAmB,IAAvB,EAA6B;AAC5B,gBAAIf,QAAQ,GAAGc,GAAG,CAACrB,IAAJ,CAASA,IAAxB;AACA,iBAAK,IAAIuB,CAAT,IAAchB,QAAd,EAAwB;AACvBX,mBAAK,CAACS,MAAN,CAAamB,IAAb,CAAkBjB,QAAQ,CAACgB,CAAD,CAA1B;AACA;AACD3B,iBAAK,CAACW,QAAN,GAAiBA,QAAjB;AACA;AACD,SAXU,EAAZ;;AAaA,KAhBO;AAiBRkB,gBAjBQ,wBAiBKC,CAjBL,EAiBQ;AACf9B,WAAK,CAACO,KAAN,GAAcuB,CAAC,CAACC,MAAF,CAASC,KAAvB;AACA,UAAIC,OAAO,GAAGjC,KAAK,CAACS,MAAN,CAAaT,KAAK,CAACO,KAAnB,CAAd;AACA,WAAI,IAAIoB,CAAR,IAAa3B,KAAK,CAACW,QAAnB,EAA6B;AAC5B,YAAGsB,OAAO,IAAIjC,KAAK,CAACW,QAAN,CAAegB,CAAf,CAAd,EAAiC;AAChC3B,eAAK,CAACQ,KAAN,GAAcmB,CAAd;AACA;AACA;AACD;AACD,KA1BO;AA2BRO,eA3BQ,yBA2BM;AACbd,SAAG,CAACe,WAAJ,CAAgB;AACfC,aAAK,EAAE,CADQ,EACL;AACVC,gBAAQ,EAAE,CAAC,UAAD,EAAa,YAAb,CAFK,EAEuB;AACtCC,kBAAU,EAAE,CAAC,OAAD,CAHG,EAGQ;AACvBd,eAAO,EAAE,iBAACC,GAAD,EAAS;AACjB,cAAIzB,KAAK,CAACY,OAAN,CAAc2B,MAAd,IAAwB,CAA5B,EAA+B;AAC9BvC,iBAAK,CAACY,OAAN,GAAgBZ,KAAK,CAACY,OAAN,CAAc4B,MAAd,CAAqBf,GAAG,CAACgB,aAAzB,CAAhB;AACA,WAFD,MAEO;AACNzC,iBAAK,CAACY,OAAN,GAAgBa,GAAG,CAACgB,aAApB;AACA;AACD,SAVc,EAAhB;;AAYA,KAxCO;AAyCRC,aAzCQ,qBAyCEZ,CAzCF,EAyCK;AACZV,SAAG,CAACuB,YAAJ,CAAiB;AAChBC,YAAI,EAAE5C,KAAK,CAACY,OADI;AAEhBiC,eAAO,EAAEf,CAAC,CAACgB,aAAF,CAAgBC,OAAhB,CAAwBzB,GAFjB,EAAjB;;AAIA,KA9CO;AA+CR0B,UA/CQ,kBA+CDlB,CA/CC,EA+CE;AACTV,SAAG,CAAC6B,SAAJ,CAAc;AACb5C,aAAK,EAAE,IADM;AAEbC,eAAO,EAAE,WAFI;AAGb4C,kBAAU,EAAE,IAHC;AAIbC,mBAAW,EAAE,IAJA;AAKb3B,eAAO,EAAE,iBAAAC,GAAG,EAAI;AACf,cAAIA,GAAG,CAAC2B,OAAR,EAAiB;AAChBpD,iBAAK,CAACY,OAAN,CAAcyC,MAAd,CAAqBvB,CAAC,CAACgB,aAAF,CAAgBC,OAAhB,CAAwBxC,KAA7C,EAAoD,CAApD;AACA;AACD,SATY,EAAd;;AAWA,KA3DO;AA4DR+C,iBA5DQ,yBA4DMxB,CA5DN,EA4DS;AAChB,UAAI9B,KAAK,CAACO,KAAN,IAAe,CAAC,CAApB,EAAuB;AACtBa,WAAG,CAACmC,SAAJ,CAAc;AACblD,eAAK,EAAE,SADM;AAEbmD,cAAI,EAAE,MAFO,EAAd;;AAIA,eAAO,KAAP;AACA;AACD,UAAIxD,KAAK,CAACK,KAAN,CAAYkC,MAAZ,IAAsB,CAA1B,EAA6B;AAC5BnB,WAAG,CAACmC,SAAJ,CAAc;AACblD,eAAK,EAAE,SADM;AAEbmD,cAAI,EAAE,MAFO,EAAd;;AAIA,eAAO,KAAP;AACA;AACD,UAAIxD,KAAK,CAACM,OAAN,CAAciC,MAAd,IAAwB,CAA5B,EAA+B;AAC9BnB,WAAG,CAACmC,SAAJ,CAAc;AACblD,eAAK,EAAE,SADM;AAEbmD,cAAI,EAAE,MAFO,EAAd;;AAIA,eAAO,KAAP;AACA;AACD,UAAIxD,KAAK,CAACY,OAAN,CAAc2B,MAAd,IAAwB,CAA5B,EAA+B;AAC9BnB,WAAG,CAACmC,SAAJ,CAAc;AACblD,eAAK,EAAE,OADM;AAEbmD,cAAI,EAAE,MAFO,EAAd;;AAIA,eAAO,KAAP;AACA;AACDpC,SAAG,CAACqC,WAAJ,CAAgB;AACfpD,aAAK,EAAE,SADQ,EAAhB;;AAGAL,WAAK,CAAC0D,SAAN;AACA,KA7FO;AA8FRA,aA9FQ,uBA8FI;AACX,UAAIC,GAAG,GAAG3D,KAAK,CAACY,OAAN,CAAc2B,MAAxB;AACA,UAAIvC,KAAK,CAACa,WAAN,IAAqB8C,GAAzB,EAA8B;AAC7B3D,aAAK,CAAC4D,QAAN;AACA,OAFD,MAEO;AACNxC,WAAG,CAACyC,UAAJ,CAAe;AACdvC,aAAG,EAAEtB,KAAK,CAACgB,SAAN,GAAkB,WADT;AAEd8C,kBAAQ,EAAE9D,KAAK,CAACY,OAAN,CAAcZ,KAAK,CAACa,WAApB,CAFI;AAGdkD,cAAI,EAAE,MAHQ;AAIdvC,iBAJc,mBAINC,GAJM,EAID;AACZA,eAAG,GAAGuC,IAAI,CAACC,KAAL,CAAWxC,GAAG,CAACrB,IAAf,CAAN;AACA,gBAAIqB,GAAG,CAACC,MAAJ,IAAc,IAAlB,EAAwB;AACvBN,iBAAG,CAACmC,SAAJ,CAAc;AACblD,qBAAK,EAAE,aADM;AAEbmD,oBAAI,EAAE,MAFO,EAAd;;AAIA,qBAAO,KAAP;AACA;AACDxD,iBAAK,CAACa,WAAN;AACAb,iBAAK,CAACU,KAAN,CAAYkB,IAAZ,CAAiBH,GAAG,CAACrB,IAArB;AACA8D,sBAAU,CAAC,YAAW;AACrBlE,mBAAK,CAAC0D,SAAN;AACA,aAFS,EAEP,IAFO,CAAV;AAGA,WAlBa;AAmBdS,cAnBc,kBAmBP;AACN/C,eAAG,CAACmC,SAAJ,CAAc;AACblD,mBAAK,EAAE,aADM;AAEbmD,kBAAI,EAAE,MAFO,EAAd;;AAIA,WAxBa,EAAf;;AA0BA;AACD,KA9HO;AA+HRI,YA/HQ,sBA+HG;AACVxC,SAAG,CAACqC,WAAJ,CAAgB;AACfpD,aAAK,EAAE,SADQ,EAAhB;;AAGA+D,aAAO,CAACC,GAAR,CAAYrE,KAAK,CAACU,KAAlB;AACAU,SAAG,CAACC,OAAJ,CAAY;AACXC,WAAG,EAAEtB,KAAK,CAACgB,SAAN,GAAkB,WADZ;AAEXO,cAAM,EAAE,MAFG;AAGX+C,cAAM,EAAE;AACP,0BAAgB,mCADT,EAHG;;AAMXlE,YAAI,EAAE;AACLC,eAAK,EAAEL,KAAK,CAACK,KADR;AAELC,iBAAO,EAAEN,KAAK,CAACM,OAFV;AAGLI,eAAK,EAAEV,KAAK,CAACU,KAHR;AAIL6D,aAAG,EAAEtE,QAAQ,CAAC,CAAD,CAJR;AAKLuE,gBAAM,EAAEvE,QAAQ,CAAC,CAAD,CALX;AAMLwE,cAAI,EAAEzE,KAAK,CAACQ,KANP;AAOLN,cAAI,EAAEkB,GAAG,CAACsD,cAAJ,CAAmB,MAAnB,CAPD,EANK;;AAeXlD,eAAO,EAAE,iBAASC,GAAT,EAAc;AACtB,cAAIA,GAAG,CAACrB,IAAJ,CAASsB,MAAT,IAAmB,IAAvB,EAA6B;AAC5BN,eAAG,CAACmC,SAAJ,CAAc;AACblD,mBAAK,EAAE,MADM;AAEbmD,kBAAI,EAAE,SAFO,EAAd;;AAIAxD,iBAAK,CAACY,OAAN,GAAgBZ,KAAK,CAACU,KAAN,GAAc,EAA9B;AACA;AACAR,gBAAI,CAACA,IAAL,CAAUF,KAAK,CAACgB,SAAhB;AACA;AACAhB,iBAAK,CAACO,KAAN,GAAc,CAAC,CAAf;AACAP,iBAAK,CAACM,OAAN,GAAgB,EAAhB;AACAN,iBAAK,CAACK,KAAN,GAAc,EAAd;AACA6D,sBAAU,CAAC,YAAW;AACrB9C,iBAAG,CAACuD,SAAJ,CAAc;AACbrD,mBAAG,EAAE,UADQ,EAAd;;AAGA,aAJS,EAIP,IAJO,CAAV;AAKA,WAjBD,MAiBO;AACNF,eAAG,CAACmC,SAAJ,CAAc;AACblD,mBAAK,EAAEoB,GAAG,CAACrB,IAAJ,CAASA,IADH;AAEboD,kBAAI,EAAE,MAFO,EAAd;;AAIA;AACD,SAvCU;AAwCXoB,gBAxCW,sBAwCA;AACVxD,aAAG,CAACyD,WAAJ;AACA,SA1CU,EAAZ;;AA4CA,KAhLO,EA5BK,E","file":"pages/write/write.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'\nimport Page from './pages/write/write.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./write.vue?vue&type=template&id=f9e9e022&\"\nvar renderjs\nimport script from \"./write.vue?vue&type=script&lang=js&\"\nexport * from \"./write.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('f9e9e022')) {\n      api.createRecord('f9e9e022', component.options)\n    } else {\n      api.reload('f9e9e022', component.options)\n    }\n    module.hot.accept(\"./write.vue?vue&type=template&id=f9e9e022&\", function () {\n      api.rerender('f9e9e022', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"project/read/pages/write/write.vue\"\nexport default component.exports","export * from \"-!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./write.vue?vue&type=template&id=f9e9e022&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./write.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./write.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nlet _this, loginRes, sign = require('../../commons/sign.js');\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\ttitle: '',\n\t\t\tcontent: '',\n\t\t\tindex: -1,\n\t\t\tcatid: 0,\n\t\t\tpicker: [],\n\t\t\tlists: [],\n\t\t\tcategory: [],\n\t\t\timgList: [],\n\t\t\tuploadIndex: 0\n\t\t};\n\t},\n\tonLoad: function() {\n\t\t_this = this;\n\t\tloginRes = _this.checkLogin('../write/write', 2);\n\t\tif (!loginRes) {\n\t\t\treturn false;\n\t\t}\n\t\t// 签名\n\t\tsign.sign(_this.apiServer);\n\t\t// 加载文章分类\n\t\t_this.getArticleCategory();\n\t},\n\tonShow: function() {\n\n\t},\n\tmethods: {\n\t\t//获取文章分类\n\t\tgetArticleCategory() {\n\t\t\tuni.request({\n\t\t\t\turl: this.apiServer + 'category&m=index',\n\t\t\t\tmethod: \"GET\",\n\t\t\t\tsuccess(res) {\n\t\t\t\t\tif (res.data.status == 'ok') {\n\t\t\t\t\t\tlet category = res.data.data;\n\t\t\t\t\t\tfor (let k in category) {\n\t\t\t\t\t\t\t_this.picker.push(category[k]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t_this.category = category;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tPickerChange(e) {\n\t\t\t_this.index = e.detail.value;\n\t\t\tlet catname = _this.picker[_this.index];\n\t\t\tfor(let k in _this.category) {\n\t\t\t\tif(catname == _this.category[k]) {\n\t\t\t\t\t_this.catid = k;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tChooseImage() {\n\t\t\tuni.chooseImage({\n\t\t\t\tcount: 4, //默认9\n\t\t\t\tsizeType: ['original', 'compressed'], //可以指定是原图还是压缩图，默认二者都有\n\t\t\t\tsourceType: ['album'], //从相册选择\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tif (_this.imgList.length != 0) {\n\t\t\t\t\t\t_this.imgList = _this.imgList.concat(res.tempFilePaths)\n\t\t\t\t\t} else {\n\t\t\t\t\t\t_this.imgList = res.tempFilePaths\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tViewImage(e) {\n\t\t\tuni.previewImage({\n\t\t\t\turls: _this.imgList,\n\t\t\t\tcurrent: e.currentTarget.dataset.url\n\t\t\t});\n\t\t},\n\t\tDelImg(e) {\n\t\t\tuni.showModal({\n\t\t\t\ttitle: '提示',\n\t\t\t\tcontent: '确定要删除图片吗？',\n\t\t\t\tcancelText: '取消',\n\t\t\t\tconfirmText: '确定',\n\t\t\t\tsuccess: res => {\n\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t_this.imgList.splice(e.currentTarget.dataset.index, 1)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tsubmitArticle(e) {\n\t\t\tif (_this.index == -1) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: \"请选择文章分类\",\n\t\t\t\t\ticon: \"none\"\n\t\t\t\t});\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (_this.title.length == 0) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: \"请输入文章标题\",\n\t\t\t\t\ticon: \"none\"\n\t\t\t\t});\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (_this.content.length == 0) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: \"请输入文章内容\",\n\t\t\t\t\ticon: \"none\"\n\t\t\t\t});\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (_this.imgList.length == 0) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: \"请上传图片\",\n\t\t\t\t\ticon: \"none\"\n\t\t\t\t});\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tuni.showLoading({\n\t\t\t\ttitle: \"正在上传...\"\n\t\t\t});\n\t\t\t_this.uploadImg();\n\t\t},\n\t\tuploadImg() {\n\t\t\tlet len = _this.imgList.length;\n\t\t\tif (_this.uploadIndex >= len) {\n\t\t\t\t_this.doSubmit();\n\t\t\t} else {\n\t\t\t\tuni.uploadFile({\n\t\t\t\t\turl: _this.apiServer + 'uploadimg',\n\t\t\t\t\tfilePath: _this.imgList[_this.uploadIndex],\n\t\t\t\t\tname: 'file',\n\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\tres = JSON.parse(res.data);\n\t\t\t\t\t\tif (res.status != 'ok') {\n\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\ttitle: \"上传图片失败,请重试!\",\n\t\t\t\t\t\t\t\ticon: \"none\"\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t_this.uploadIndex++;\n\t\t\t\t\t\t_this.lists.push(res.data);\n\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\t_this.uploadImg();\n\t\t\t\t\t\t}, 1000)\n\t\t\t\t\t},\n\t\t\t\t\tfail() {\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: \"上传图片失败,请重试!\",\n\t\t\t\t\t\t\ticon: \"none\"\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\tdoSubmit() {\n\t\t\tuni.showLoading({\n\t\t\t\ttitle: \"正在提交...\"\n\t\t\t});\n\t\t\tconsole.log(_this.lists)\n\t\t\tuni.request({\n\t\t\t\turl: _this.apiServer + \"art&m=add\",\n\t\t\t\tmethod: \"POST\",\n\t\t\t\theader: {\n\t\t\t\t\t'content-type': 'application/x-www-form-urlencoded'\n\t\t\t\t},\n\t\t\t\tdata: {\n\t\t\t\t\ttitle: _this.title,\n\t\t\t\t\tcontent: _this.content,\n\t\t\t\t\tlists: _this.lists,\n\t\t\t\t\tuid: loginRes[0],\n\t\t\t\t\trandom: loginRes[2],\n\t\t\t\t\tcate: _this.catid,\n\t\t\t\t\tsign: uni.getStorageSync(\"sign\")\n\t\t\t\t},\n\t\t\t\tsuccess: function(res) {\n\t\t\t\t\tif (res.data.status == 'ok') {\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: \"提交成功\",\n\t\t\t\t\t\t\ticon: \"success\"\n\t\t\t\t\t\t});\n\t\t\t\t\t\t_this.imgList = _this.lists = [];\n\t\t\t\t\t\t// 清空数据\n\t\t\t\t\t\tsign.sign(_this.apiServer);\n\t\t\t\t\t\t// 防止数据缓存\n\t\t\t\t\t\t_this.index = -1;\n\t\t\t\t\t\t_this.content = '';\n\t\t\t\t\t\t_this.title = '';\n\t\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\t\tuni.switchTab({\n\t\t\t\t\t\t\t\turl: '../me/me'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}, 1000);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: res.data.data,\n\t\t\t\t\t\t\ticon: \"none\"\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tcomplete() {\n\t\t\t\t\tuni.hideLoading();\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t}\n}\n"],"sourceRoot":""}